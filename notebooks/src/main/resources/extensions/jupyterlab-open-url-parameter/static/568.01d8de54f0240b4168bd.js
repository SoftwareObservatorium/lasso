"use strict";(self.webpackChunkjupyterlab_open_url_parameter=self.webpackChunkjupyterlab_open_url_parameter||[]).push([[568],{568:(e,t,a)=>{a.r(t),a.d(t,{default:()=>c});var r=a(247),o=a(162),n=a(261),s=a(226),l=a(186);const u=new RegExp("/(lab|notebooks|edit)/?"),c={id:"jupyterlab-open-url-parameter:plugin",autoStart:!0,requires:[r.IRouter,l.ITranslator],optional:[s.IDefaultFileBrowser],activate:(e,t,a,r)=>{var s;const{commands:c}=e,i=null!==(s=a.load("jupyterlab"))&&void 0!==s?s:l.nullTranslator,p="router:fromUrl";c.addCommand(p,{execute:async a=>{var s;const l=a,{request:p,search:d}=l,m=null!==(s=p.match(u))&&void 0!==s?s:[];if(!m)return;const h=new URLSearchParams(d),g="fromURL",f=h.getAll(g);if(!f||0===f.length)return;const w=f.map((e=>decodeURIComponent(e))),v=()=>{const e=new URL(n.URLExt.join(n.PageConfig.getBaseUrl(),p));e.searchParams.delete(g);const{pathname:a,search:r}=e;t.navigate(`${a}${r}`,{skipRouting:!0})},b=async e=>{var t;let a,s="";try{const r=await fetch(e);a=await r.blob(),s=null!==(t=r.headers.get("Content-Type"))&&void 0!==t?t:""}catch(t){const a=t;return a.response&&200!==a.response.status&&(a.message=i.__("Could not open URL: %1",e)),(0,o.showErrorMessage)(i.__("Cannot fetch"),a)}try{const t=n.PathExt.basename(e),o=new File([a],t,{type:s}),l=await(null==r?void 0:r.model.upload(o));if(!l)return;return c.execute("docmanager:open",{path:l.path,options:{ref:"_noref"}})}catch(e){return(0,o.showErrorMessage)(i._p("showErrorMessage","Upload Error"),e)}},[_]=m;if((null==_?void 0:_.includes("/notebooks"))||(null==_?void 0:_.includes("/edit"))){const[e]=w;return await b(e),void v()}e.restored.then((async()=>{await Promise.all(w.map((e=>b(e)))),v()}))}}),t.register({command:p,pattern:u})}}}}]);